"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.verifyConditions = void 0;
const detect_license_path_1 = require("./detect-license-path");
const fs_1 = require("fs");
const detect_license_1 = require("./detect-license");
async function verifyConditions({ license }, context) {
    const licensePath = (license === null || license === void 0 ? void 0 : license.path) || await detect_license_path_1.detectLicensePath();
    if (!licensePath) {
        throw new Error('License file not found');
    }
    const content = (await fs_1.promises.readFile(licensePath)).toString();
    const licenseType = await detect_license_1.detectLicense(content);
    if (!licenseType) {
        throw new Error('Could not detect license');
    }
    context.logger.log(`Detected license type ${licenseType}`);
}
exports.verifyConditions = verifyConditions;
//# sourceMappingURL=verify-conditions.js.map